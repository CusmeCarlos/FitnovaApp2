<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/auth/login"></ion-back-button>
    </ion-buttons>
    <ion-title>Restablecer contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <h2>¿Olvidaste tu contraseña?</h2>
  <p>Ingresa tu correo electrónico y te enviaremos un enlace para restablecer tu contraseña.</p>

  <form [formGroup]="resetForm" (ngSubmit)="onSubmit()">
    <ion-item>
      <ion-label position="floating">Correo electrónico</ion-label>
      <ion-input type="email" formControlName="email" autocomplete="email"></ion-input>
    </ion-item>
    <div *ngIf="email?.invalid && (email?.dirty || email?.touched)" class="error-message">
      <div *ngIf="email?.errors?.['required']">El correo electrónico es obligatorio.</div>
      <div *ngIf="email?.errors?.['email']">Ingrese un correo electrónico válido.</div>
    </div>

    <ion-button expand="block" type="submit" [disabled]="resetForm.invalid || loading" class="ion-margin-top">
      <ion-spinner *ngIf="loading" name="crescent"></ion-spinner>
      <span *ngIf="!loading">Enviar correo de restablecimiento</span>
    </ion-button>
    
  </form>

  <div class="login-link">
    <ion-button fill="clear" routerLink="/auth/login">
      Volver a Iniciar sesión
    </ion-button>