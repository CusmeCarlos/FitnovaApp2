// src/app/features/training/components/pose-camera/pose-camera.component.scss
// ‚úÖ VERSI√ìN SIMPLIFICADA - UN SOLO SISTEMA DE ALERTAS

// ========================================
// üìπ CONTENEDOR PRINCIPAL
// ========================================

.camera-container {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #000;
}

// ========================================
// üìπ VIDEO Y CANVAS
// ========================================

.camera-content {
  position: relative;
  width: 100%;
  height: 100%;

  &.hidden {
    display: none;
  }
}

.camera-video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transform: scaleX(-1); // ‚úÖ INVERTIR VIDEO HORIZONTALMENTE (EFECTO ESPEJO)
}

.skeleton-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 10;

  &.hidden {
    display: none;
  }
}

// ========================================
// ‚úÖ CANVAS UNIFICADO DE ALERTAS (NUEVO)
// ========================================

// ‚úÖ Canvas para estados de preparaci√≥n (lateral)
.readiness-notification-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 35; // ‚úÖ Debajo de alertas (40) pero sobre todo lo dem√°s
  pointer-events: none; // ‚úÖ No bloquea interacci√≥n
}

// ‚úÖ Canvas para alertas de error (superior centro)
.error-alert-canvas {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 40; // ‚úÖ Sobre las notificaciones de estado
  pointer-events: none;
}
// ========================================
// ‚ùå CLASES ELIMINADAS (NO USAR)
// ========================================

// ‚ùå ELIMINADO: .readiness-panel
// ‚ùå ELIMINADO: .current-errors
// ‚ùå ELIMINADO: .error-overlay-canvas
// ‚ùå ELIMINADO: .error-item

// ========================================
// üîÑ OVERLAY DE CARGA
// ========================================

.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 100;
  gap: 20px;
}

.loading-spinner {
  ion-spinner {
    width: 60px;
    height: 60px;
    --color: var(--ion-color-primary);
  }
}

.loading-text {
  color: white;
  font-size: 18px;
  font-weight: 600;
  text-align: center;
}

.loading-subtitle {
  color: rgba(255, 255, 255, 0.7);
  font-size: 14px;
}

// ========================================
// ‚ùå OVERLAY DE ERROR
// ========================================

.error-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  padding: 20px;
}

.error-content {
  text-align: center;
  max-width: 400px;
}

.error-icon {
  font-size: 80px;
  color: var(--ion-color-danger);
  margin-bottom: 20px;
}

.error-title {
  color: white;
  font-size: 24px;
  font-weight: bold;
  margin-bottom: 10px;
}

.error-message {
  color: rgba(255, 255, 255, 0.8);
  font-size: 16px;
  margin-bottom: 30px;
  line-height: 1.5;
}

.retry-button {
  --background: var(--ion-color-primary);
  --border-radius: 12px;
  font-weight: 600;
  height: 50px;
}

// ========================================
// üìä PANEL DE ESTAD√çSTICAS
// ========================================

.stats-panel {
  position: absolute;
  top: 15px;
  left: 15px;
  right: 15px;
  display: flex;
  justify-content: space-between;
  gap: 10px;
  z-index: 20; // ‚úÖ DEBAJO de alertas (40)
  pointer-events: none;
}

.stat-item {
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  padding: 8px 12px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  font-size: 12px;
  color: white;
  font-weight: 500;
  min-width: 60px;

  ion-icon {
    font-size: 14px;
    opacity: 0.9;
  }
}

// ========================================
// üé§ INDICADOR DE AUDIO
// ========================================

.audio-indicator {
  position: absolute;
  top: 70px;
  left: 15px;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(10px);
  padding: 8px 12px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  gap: 6px;
  z-index: 25; // ‚úÖ DEBAJO de alertas (40)
  color: #4ade80;
  font-size: 12px;
  font-weight: 600;

  ion-icon {
    font-size: 16px;
    
    &.pulse {
      animation: audioPulse 1s ease-in-out infinite;
    }
  }
}

@keyframes audioPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.6;
    transform: scale(1.1);
  }
}

// ========================================
// üéÆ PANEL DE CONTROLES
// ========================================

.controls-panel {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 10px;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(12px);
  padding: 8px;
  border-radius: 12px;
  z-index: 30; // ‚úÖ DEBAJO de alertas (40)

  ion-button {
    --color: rgba(255, 255, 255, 0.7);
    --background: transparent;
    --background-hover: rgba(255, 255, 255, 0.1);
    margin: 0;
    min-width: 44px;
    height: 44px;

    &.active {
      --color: var(--ion-color-primary);
      --background: rgba(var(--ion-color-primary-rgb), 0.2);
    }

    ion-icon {
      font-size: 24px;
    }
  }
}

// ========================================
// üì± RESPONSIVE
// ========================================

@media (max-width: 768px) {
  .stats-panel {
    top: 10px;
    left: 10px;
    right: 10px;
    gap: 6px;
  }

  .stat-item {
    padding: 6px 10px;
    font-size: 11px;
    min-width: 50px;

    ion-icon {
      font-size: 12px;
    }
  }

  .audio-indicator {
    top: 60px;
    left: 10px;
    padding: 6px 10px;
    font-size: 11px;

    ion-icon {
      font-size: 14px;
    }
  }

  .controls-panel {
    bottom: 15px;
    gap: 8px;
    padding: 6px;

    ion-button {
      min-width: 40px;
      height: 40px;

      ion-icon {
        font-size: 22px;
      }
    }
  }

  .loading-text {
    font-size: 16px;
  }

  .error-title {
    font-size: 20px;
  }

  .error-message {
    font-size: 14px;
  }
}

@media (max-width: 400px) {
  .stats-panel {
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
  }

  .stat-item {
    padding: 4px 8px;
    font-size: 10px;
    min-width: auto;
  }
}