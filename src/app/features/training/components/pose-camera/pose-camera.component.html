<!-- src/app/features/training/components/pose-camera/pose-camera.component.html -->
<!-- ‚úÖ TEMPLATE CON ESTRATEGIA STATIC:TRUE -->

<div class="camera-container">
  
  <!-- üîÑ ESTADO DE CARGA -->
  <div class="loading-overlay" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <div class="loading-text">Iniciando c√°mara...</div>
    <div class="loading-subtitle" *ngIf="initializationAttempts > 0">
      Intento {{ initializationAttempts }} de {{ maxInitializationAttempts }}
    </div>
  </div>

  <!-- ‚ùå ESTADO DE ERROR -->
  <div class="error-overlay" *ngIf="error && !isLoading">
    <div class="error-icon">üì∑</div>
    <div class="error-title">Error de Inicializaci√≥n</div>
    <div class="error-message">{{ error }}</div>
    <button class="retry-button" (click)="startCamera()">
      REINTENTAR
    </button>
  </div>

  <!-- ‚úÖ ELEMENTOS DE C√ÅMARA - SIEMPRE PRESENTES PARA VIEWCHILD STATIC -->
  <div class="camera-content" 
       [style.display]="(!isLoading && !error && isInitialized) ? 'block' : 'none'">
    
    <!-- üìπ VIDEO - SIEMPRE EN DOM -->
    <video 
      #videoElement 
      class="video-element"
      autoplay 
      muted 
      playsinline>
    </video>
    
    <!-- üé® CANVAS - SIEMPRE EN DOM -->
    <canvas 
      #canvasElement 
      class="canvas-element">
    </canvas>
    
    <!-- üéØ OVERLAY - SIEMPRE EN DOM -->
    <canvas 
      #overlayElement 
      class="overlay-element">
    </canvas>
    
  </div>

  <!-- üìä UI ELEMENTOS - SOLO CUANDO EST√Å ACTIVO -->
  <div class="ui-overlay" *ngIf="!isLoading && !error && isInitialized">
    
    <!-- DEBUG PANEL -->
    <div class="debug-panel" *ngIf="fps > 0">
      <div class="debug-row">FPS: {{ fps }}</div>
      <div class="debug-row">Reps: {{ repetitionCount }}</div>
      <div class="debug-row">Calidad: {{ currentQuality }}%</div>
      <div class="debug-row">Errores: {{ currentErrors.length }}</div>
    </div>
    
    <!-- CONTROLES -->
    <div class="controls-panel">
      <button class="control-btn" (click)="toggleSkeleton()">
        {{ showSkeleton ? 'ü¶¥ ON' : 'ü¶¥ OFF' }}
      </button>
      <button class="control-btn" (click)="resetSession()">üîÑ</button>
      <button class="control-btn" (click)="stopCamera()">‚èπÔ∏è</button>
    </div>
    
    <!-- ALERTAS DE ERRORES -->
    <div class="error-alerts" *ngIf="currentErrors.length > 0">
      <div 
        *ngFor="let error of currentErrors; trackBy: trackByErrorType" 
        class="error-alert">
        ‚ö†Ô∏è {{ error.description }}
      </div>
    </div>
    
  </div>

>